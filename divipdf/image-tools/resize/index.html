<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resize Image - DiviPDF Studio</title>
<style>
body{text-align:center;background:#f9f9f9;padding:40px;font-family:sans-serif;}
form{background:#fff;padding:30px;border-radius:10px;display:inline-block;}
input{margin:5px;}
.success,.error,.processing{margin-top:15px;padding:10px;border-radius:5px;}
.success{background:#d4edda;color:#155724;}
.error{background:#f8d7da;color:#721c24;}
.processing{background:#fff3cd;color:#856404;}
</style>
</head>
<body>
<h1>Resize Image</h1>
<form id="uploadForm">
  <input id="fileInput" type="file" accept="image/*"><br>
  Width: <input id="width" type="number" value="800" style="width:80px">
  Height: <input id="height" type="number" value="600" style="width:80px"><br>
  <button type="submit">Resize</button>
</form>
<div id="message"></div>

<script>
const API_BASE_URL='https://divipdf-2.onrender.com';
document.getElementById('uploadForm').addEventListener('submit',async e=>{
e.preventDefault();
const file=document.getElementById('fileInput').files[0];
const w=document.getElementById('width').value;
const h=document.getElementById('height').value;
const msg=document.getElementById('message');
if(!file){msg.innerHTML='<div class="error">Select an image</div>';return;}
msg.innerHTML='<div class="processing">Resizing...</div>';
const fd=new FormData();fd.append('file',file);fd.append('width',w);fd.append('height',h);
try{
const res=await fetch(`${API_BASE_URL}/image-resize/`,{method:'POST',body:fd});
if(res.ok){const blob=await res.blob();const a=document.createElement('a');
a.href=URL.createObjectURL(blob);a.download=file.name.replace(/\.[^/.]+$/,'_resized.png');a.click();
msg.innerHTML='<div class="success">Image resized successfully!</div>';}
else{const err=await res.json();msg.innerHTML=`<div class="error">${err.detail||'Failed'}</div>`;}
}catch(er){msg.innerHTML=`<div class="error">${er.message}</div>`;}
});
</script>
</body>
</html>
